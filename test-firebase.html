<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Teste Firebase - LisboaGo</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <h1>ğŸ§ª Teste de ConexÃ£o Firebase</h1>
    <div id="status" style="padding: 20px; margin: 10px; border-radius: 5px; background: #f0f0f0;"></div>
    <button onclick="testFirebase()">Testar Firebase</button>
    <button onclick="testWrite()">Testar Escrita</button>
    <button onclick="testRead()">Testar Leitura</button>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyB2ljIwjmbPF1vfCgth4bLd3d7hhLdxKIk",
            authDomain: "lisboago-app.firebaseapp.com",
            databaseURL: "https://lisboago-app-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "lisboago-app",
            storageBucket: "lisboago-app.firebasestorage.app",
            messagingSenderId: "467502556237",
            appId: "1:467502556237:web:ff0074a42a664f7efba804"
        };

        let database;

        function log(message, isError = false) {
            const status = document.getElementById('status');
            const color = isError ? '#ff4444' : '#44ff44';
            status.innerHTML += `<div style="color: ${color}; margin: 5px 0;">${message}</div>`;
            console.log(message);
        }

        function testFirebase() {
            log('ğŸ”§ Inicializando Firebase...');
            
            try {
                firebase.initializeApp(firebaseConfig);
                database = firebase.database();
                log('âœ… Firebase inicializado');
                
                // Testar conexÃ£o
                database.ref('.info/connected').on('value', (snapshot) => {
                    if (snapshot.val() === true) {
                        log('ğŸŒ CONECTADO ao Firebase Realtime Database!');
                    } else {
                        log('âŒ DESCONECTADO do Firebase');
                    }
                });
                
            } catch (error) {
                log('âŒ Erro ao inicializar Firebase: ' + error.message, true);
            }
        }

        function testWrite() {
            if (!database) {
                log('âŒ Firebase nÃ£o inicializado', true);
                return;
            }
            
            log('ğŸ“ Testando escrita...');
            
            const testData = {
                message: 'Teste de conexÃ£o',
                timestamp: Date.now(),
                success: true
            };
            
            database.ref('test_connection').set(testData)
                .then(() => {
                    log('âœ… Escrita bem-sucedida!');
                })
                .catch((error) => {
                    log('âŒ Erro na escrita: ' + error.message, true);
                    log('ğŸ” CÃ³digo do erro: ' + error.code, true);
                });
        }

        function testRead() {
            if (!database) {
                log('âŒ Firebase nÃ£o inicializado', true);
                return;
            }
            
            log('ğŸ“– Testando leitura...');
            
            database.ref('test_connection').once('value')
                .then((snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        log('âœ… Leitura bem-sucedida: ' + JSON.stringify(data));
                    } else {
                        log('â„¹ï¸ Nenhum dado encontrado');
                    }
                })
                .catch((error) => {
                    log('âŒ Erro na leitura: ' + error.message, true);
                    log('ğŸ” CÃ³digo do erro: ' + error.code, true);
                });
        }
    </script>
</body>
</html>